<!DOCTYPE html>
<html>
<!-- Prufa -->
  <head>
    <meta charset="utf-8">
    <title>Hello world</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- load bootstrap for nicer ui -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  </head>
  <body>

    <div class="container">
      <h1>Welcome to Tic,Tac, Toe!</h1>

      <p>Leggðu saman tvær tölur að eigin vali og sannreyndu útkomuna.</p>

      <form method="post" action="/play" class="hidden" id="game-form">
          <input type="hidden" name="current-player" id="current-player" value="X"/>
          <input type="hidden" name="x0y0" />
          <input type="hidden" name="x1y0" />
          <input type="hidden" name="x2y0" />
          <input type="hidden" name="x0y1" />
          <input type="hidden" name="x1y1" />
          <input type="hidden" name="x2y1" />
          <input type="hidden" name="x0y2" />
          <input type="hidden" name="x1y2" />
          <input type="hidden" name="x2y2" />
      </form>
      <hr>
      <div id="game">
          <table>
              <tr>
                  <td class="tile" data-coords="x0y0">x0y0</td>
                  <td class="tile" data-coords="x1y0">x1y0</td>
                  <td class="tile" data-coords="x2y0">x2y0</td>
              </tr>
              <tr>
                  <td class="tile" data-coords="x0y1">x0y1</td>
                  <td class="tile" data-coords="x1y1">x1y1</td>
                  <td class="tile" data-coords="x2y1">x2y1</td>
              </tr>
              <tr>
                  <td class="tile" data-coords="x0y2">x0y2</td>
                  <td class="tile" data-coords="x1y2">x1y2</td>
                  <td class="tile" data-coords="x2y2">x2y2</td>

              </tr>
          </table>
      </div>
    </div>

    <!-- load jquery -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <!-- use ajax to submit form, retreive the result and display on the page -->
    <script>
    $(document).ready(function() {
        $(".tile").click(function(e) {
            e.preventDefault();
            var tile = $(e.target);
            tile.attr("class")
            var coords = tile.attr("data-coords");
            console.log(coords);
            var currentPlayer = $("#current-player").val();
            console.log(currentPlayer);
            $("input[name='" + coords + "']").val(currentPlayer);
            var form = $("#game-form");
            $.ajax({
               url: form.attr("action"),
               data: form.serialize(),
                success: function() {
                    alert("lol");
                }
            });
        })


    });
    </script>
  </body>
</html>
